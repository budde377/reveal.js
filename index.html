<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/blood.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
		<style>
			.reveal section h1 {
				font-size: 2em;
			}
			.reveal section h2 {
				font-size: 1.5em;
			}
			.reveal section h3 {
				font-size: 1em;
			}
			.reveal section img.icon {
				border: 0;
				margin: 0;
				height: 1em;
				background: transparent;
				display: inline-block;
			}
			.reveal section cite {
				font-style: italic;
				padding: 0 2em;
				display: block;
				font-size: 0.8em;
			}
			.reveal section cite .source {
				display: block;
				text-align: right;
				padding-top: 2em;
				font-size: 0.5em;
			}
			.reveal section a.reference {
				font-size: 0.5em;
				line-height: 2em;
			}
		</style>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
						<h1>Building personal and intelligent assistants</h1>
						BartJS Meetup - 31. August 2017
				</section>
				<section>
						<h2>About me</h2>
						<p class="fragment">
							Christian Budde Christensen
						</p>
						<p class="fragment">
							M.Sc. from Aarhus University, Denmark
						</p>
						<p class="fragment">
							<img class="icon" data-src="img/GitHub-Mark-Light-120px-plus.png"> / budde377
						</p>
						<p class="fragment">
							Software developer at Mito Ai
						</p>
				</section>
				<section>
					<h2>Mito.ai</h2>
					<p class="fragment">
						7 employees
					</p>
					<p class="fragment">
						FinTech F3 inkubator
					</p>
					<p class="fragment">
						Assistant for private investors
					</p>
					<p class="fragment">
						Scala, JavaScript, Flow, Docker, Kubernetes, <br /> Google Cloud
					</p>
					<aside class="notes">
						400 000 articles / 24h
						GitHub
						Continious Deployment
						Demo bot
					</aside>
				</section>
				<!-- INTRODUCTION -->
				<section>
					<h2>The Mito bot</h2>
					<img data-src="img/mito-bot.gif" />
				</section>
				<section>
						<h2>Why chatbots?</h2>
						<ul>
							<li class="fragment">Massive user-base</li>
							<li class="fragment">Cross-platform distribution channel</li>
							<li class="fragment">Push notifications</li>
							<li class="fragment">VERY simple interface</li>
							<li class="fragment">Cheap NLU</li>
						</ul>
				</section>
				<section>
						<h2>Anatomy of a chatbot</h2>
						<ol>
							<li class="fragment">Integrate w. a messaging platform</li>
							<li class="fragment">Parse and understand incomming messages</li>
							<li class="fragment">Build reply to incomming messages</li>
						</ol>
				</section>
				<section>
					<h2>Messaging platforms</h2>
					<ul>
						<li>Slack</li>
						<li>WhatsApp</li>
						<li>Skype</li>
						<li>Facebook Messenger</li>
					</ul>
					<p class="fragment">
						Could also be applied to voice platforms
					</p>
				</section>
				<section>
					<h3>Example: Facebook Messenger</h3>
					<ol>
						<li class="fragment">
							Receive messages with Webhooks
							<a class="reference" href="https://developers.facebook.com/docs/messenger-platform/webhook">
								https://developers.facebook.com/docs/messenger-platform/webhook
							</a>
						</li>
						<li class="fragment">
							Send replies via Facebook Graph API
							<a class="reference" href="https://developers.facebook.com/docs/messenger-platform/reference/send-api">
								https://developers.facebook.com/docs/messenger-platform/reference/send-api
							</a>
						</li>
						<div class="fragment">
						<li>...</li>
						<li>
							Profit
						</li>
					</div>
					</ol>
				</section>
				<section>
						<h2>Anatomy of a chatbot</h2>
						<ol>
							<li>Integrate w. a messaging platform ✅</li>
							<li>Parse and understand incomming messages</li>
							<li>Build reply to incomming messages</li>
						</ol>
				</section>
				<section>
					<cite>
						<b>N</b>atural <b>L</b>aunguage <b>U</b>nderstanding is a subtopic
						of natural language processing in artificial intelligence that deals
						with machine reading comprehension
						<a class="source">
							https://en.wikipedia.org/wiki/Natural_language_understanding
						</a>
					</cite>
					<aside class="notes">
						The brains of a chatbot. What makes it different from
						just defining commands.
					</aside>
				</section>
				<section>
					<h2>Chatbot frameworks</h2>
					<p>Major players are providing <i>free</i> NLU services</p>
					<ul>
						<li> API.ai (Google)</li>
						<li> Watson (IBM)</li>
						<li> Bot framework (Microsoft)</li>
						<li> Wit.ai (Facebook)</li>
				</section>
				<section>
					<h3>Example: Wit.ai</h3>
					<img data-src="img/wit.gif" />
				</section>
				<section>
					<h3>Example: Wit.ai</h3>
					<pre><code class="bash" data-trim data-noescape>
curl -XGET 'https://api.wit.ai/message?q=<mark>Send%20me%20a%20Gif</mark>' \
  -H 'Authorization: Bearer <mark>TOKEN</mark>
					</code></pre>
					<pre><code class="json" data-trim data-noescape>
{
  "msg_id": "0EPRPKKplHuhYqMC6",
  "_text": "Send me a Gif",
  "entities": {
    "subject": [
      {
        "suggested": true,
        "confidence": 0.77118552501085,
        "value": "Gif",
        "type": "value"
      }
    ],
    "intent": [
      {
        "confidence": 0.99553908116399,
        "value": "gif"
      }
    ]
  }
}
				</code></pre>
				<aside class="notes">
					Show how to train Wit, intent and pull subject
				</aside>
				</section>
				<section>
						<h2>Anatomy of a chatbot</h2>
						<ol>
							<li>Integrate w. a messaging platform ✅</li>
							<li>Parse and understand incomming messages ✅</li>
							<li>Build reply to incomming messages</li>
						</ol>
				</section>
				<section>
					<h2>Our requirements</h2>
					<p>
						<ul>
							<li class="fragment">Integrate with our API</li>
							<li class="fragment">Ensure platform independence</li>
							<li class="fragment">Version control and deployment</li>
							<li class="fragment">Limit number of external dependencies</li>
							<li class="fragment">Utilize messaging platform fully</li>
						</ul>
					</p>
				</section>

				<!-- FIRST ITERATION (USING BOT BUILDERS) -->
				<section>
					<h2>Using a bot builder</h2>
					<ul>
						<li class="fragment">
							Outsourcing conversation logic
						</li>
						<li class="fragment">
							Provided with NLU services
						</li>
						<li class="fragment">
							Cheap!
						</li>
					</ul>
				</section>
				<section>
					<h2>What could go wrong?</h2>
					<ul>
						<li class="fragment">Limited posibility for advanced conversation-flow</li>
						<li class="fragment">Hard to override bad NLU</li>
						<li class="fragment">Either too specialized or too general</li>
						<li class="fragment">No version control</li>
						<li class="fragment">No deployment</li>
					</ul>
				</section>
				<section>
					<h2>Disclaimer</h2>
					<ul>
					<p>
						Bot builders is a field in rapid development<br />
						Great for very simple bots with simple flow
					</p>
				</ul>
				</section>
				<section>
					<h2>Questions so far?</h2>
				</section>

				<!-- SECOND ITERATION (MAKING IT OUR SELVES) -->
				<section>
					<h2>TalkTalk: A framework for conversation logic</h2>
					<p>
						Available at
					</p>
					<p>
						<a href="https://github.com/mitoai/talktalk">https://github.com/mitoai/talktalk</a>
					</p>
					<p>
						Examples at
					</p>
					<p>
						<a href="https://github.com/mitoai/talktalk-examples">https://github.com/mitoai/talktalk-examples</a>
					</p>
				</section>
				<section>
					<h2>Echo</h2>
					<pre><code class="javascript" data-noescape data-trim>
class EchoHandler extends Handler {
  async handleFirstMessage (message: CliMessage): Promise<*> {
    await this.sendReply({message: message.message})
  }
}

const dispatcher: Dispatcher<CliMessage, CliReply> = new Dispatcher(cliReplier)

dispatcher.registerHandler(EchoHandler)

startCliBot(dispatcher)
					</code></pre>
				</section>
				<section>
					<h2>Counter</h2>
					<pre><code class="javascript" data-noescape data-trim>
class CounterHandler extends Handler {
  async handleFirstMessage (message: CliMessage) {
    await this.sendReply({message: 'You have sent 1 message'})
    return {count: 1}
  }

  async handleSessionMessage (message: CliMessage,
                              context: { count: number }) {
    const newCount = context.count + 1
    await this.sendReply({message: `You have sent ${newCount} messages`})
    return {count: newCount}
  }
}
					</code></pre>
				</section>
				<section>
					<h2>Counter</h2>
					<pre><code class="javascript" data-noescape data-trim>
class CounterHandler extends Handler {
  async handleFirstMessage (message: CliMessage) {
    await this.sendReply({message: 'You have sent 1 message'})
    return {count: 1}
  }

  async handleSessionMessage (message: CliMessage,
                              context: { count: number }) {
    const newCount = context.count + 1
    await this.sendReply({message: `You have sent ${newCount} messages`})
    return {count: newCount}
  }
}
					</code></pre>
				</section>
				<section>
					<h2>Counter</h2>
					<pre><code class="javascript" data-noescape data-trim>
async handleSessionMessage (msg): Promise<*> {
  const candidate = msg.entities.subject &amp;&amp; findBestCandidate(msg.entities.subject)
  if (!candidate || candidate.confidence < 0.5) {
    await this.sendReply({message: 'Sorry, I did not understand that. Please try again.'})
    return {}
  }
  await this.sendReply({message: `Ok, I'll see what I can find about "${candidate.value}"`})
  const gif = await fetchGif(candidate.value)
  if (!gif) {
    await this.sendReply({message: `I couldn't find any gif about ${candidate.value}`})
    return
  }
  await this.sendReply({message: `I found this gif: ${gif}`})
}
					</code></pre>
				</section>
				<section>
					<h2>Jump</h2>
					<pre><code class="javascript" data-noescape data-trim>
class QualityJudgeHandler extends Handler {
  async handleJump (context: { number: number }) {
    await this.sendReply({message: `${context.number}... That's not very original`})
    this.jumpTo(IntroHandler, {})
  }
}

class IntroHandler extends Handler {
  async handleFirstMessage (): Promise<*> {
    await this.sendReply({message: 'Hi'})
    await this.sendReply({message: 'Please give me a number between 0 and 100!'})
    return {}
  }

  async handleSessionMessage (message: CliMessage): Promise<*> {
    const number = parseInt(message.message)
    if (isNaN(number) || number < 0 || number > 100) {
      await this.sendReply({message: 'That is not a valid number...'})
      await this.sendReply({message: 'Try again!'})
      return {}
    }
    this.jumpTo(QualityJudgeHandler, {number})
  }

  async handleJump (): Promise<*> {
    this.sendReply({message: 'Try again!'})
    return {}
  }
}
					</code></pre>
				</section>
				<section>
					<h2>Gif</h2>
					<pre><code class="javascript" data-noescape data-trim>
async handleSessionMessage (msg): Promise<*> {
  const candidate = msg.entities.subject &amp;&amp; findBestCandidate(msg.entities.subject)
  if (!candidate || candidate.confidence < 0.5) {
    await this.sendReply({message: 'Sorry, I did not understand that. Please try again.'})
    return {}
  }
  await this.sendReply({message: `Ok, I'll see what I can find about "${candidate.value}"`})
  const gif = await fetchGif(candidate.value)
  if (!gif) {
    await this.sendReply({message: `I couldn't find any gif about ${candidate.value}`})
    return
  }
  await this.sendReply({message: `I found this gif: ${gif}`})
}
					</code></pre>
				</section>
				<section>
					<h2>Testing</h2>
					<pre><code class="javascript" data-noescape data-trim>
const tester : Tester<Message, Reply> = new Tester()

class HelloWorldHandler extends Handler { ... }

tester.dispatcher.registerHandler(HelloWorldHandler)

describe('dispatcher', () => {
  it('should send hello world', async () => {
    const convo = tester.startConversation()
    await convo.sendMessage({message: 'Hi'})
    const reply = await convo.expectReply()
    assert(reply.message === 'Hello world')
  })
})
					</code></pre>
				</section>
				<section>
						<h2>Anatomy of a chatbot</h2>
						<ol>
							<li>Integrate w. a messaging platform ✅</li>
							<li>Parse and understand incomming messages ✅</li>
							<li>Build reply to incomming messages ✅</li>
						</ol>
				</section>
				<!-- CONCLUSION -->
				<section>
					<h2>Should we?</h2>
					<p class="fragment">
						Chatbots are easy to implement and cheap
					</p>
					<p class="fragment">
						Take conversation design serious
					</p>
					<p class="fragment">
						Chatbot is a buzzword
					</p>
					<p class="fragment">
						Consider if a chatbot is ideal for your use-case
					</p>
				</section>
				<section>
					<h2>Questions?</h2>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				history: true,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
